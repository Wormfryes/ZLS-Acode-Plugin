"use strict";(()=>{var s={id:"zigclient.plugin",name:"Zig Language Client",main:"main.js",version:"1.3.0",readme:"readme.md",icon:"icon.png",files:[],minVersionCode:290,price:0,author:{name:"Wormfryes",email:"wormfryes@hotmail.com",github:"Wormfryes"}};var r=class{baseUrl="";client=null;async init(e,i,a){let t=acode.require("acode-language-client");if(!t){window.addEventListener("plugin.install",c=>{c.detail.name==="acode-language-client"&&(t=acode.require("acode-language-client"),this.startZigServer(t))});return}await this.startZigServer(t)}async startZigServer(e){try{let a={type:"socket",socket:e.getSocketForCommand("zls",[]),clientCapabilities:{textDocument:{semanticTokens:!1,synchronization:{didChange:!1},documentHighlight:!1},workspace:{semanticTokens:!1,didChangeConfiguration:!1}}};this.client=new e.LanguageClient(a),e.registerService("zig",this.client)}catch(i){if(console.error("ZLS error:",i),i.message?.includes("ENOENT")){acode.alert("ZLS Not Found","Please install ZLS with: pkg install zls");return}if(i.code==="EPIPE"||i.message?.includes("write EPIPE"))return}}async destroy(){if(this.client){try{await this.client.stop()}catch{}this.client=null}}};if(window.acode){let n=new r;acode.setPluginInit(s.id,async(e,i,{cacheFileUrl:a,cacheFile:t})=>{e.endsWith("/")||(e+="/"),n.baseUrl=e,await n.init(i,t,a)}),acode.setPluginUnmount(s.id,()=>{n.destroy()})}})();
